# GitHub Actions å·¥ä½œæµæŒ‡å—

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç» AnywhereChat é¡¹ç›®çš„ GitHub Actions å·¥ä½œæµé…ç½®å’Œä½¿ç”¨æ–¹æ³•ã€‚

## ğŸ”„ å·¥ä½œæµæ¦‚è§ˆ

### 1. å¤šå¹³å°æ„å»ºå’Œå‘å¸ƒ (`multi-platform-build.yml`)

**ç”¨é€”**: ç”Ÿäº§ç¯å¢ƒçš„å¤šå¹³å°æ„å»ºå’Œè‡ªåŠ¨å‘å¸ƒ

**è§¦å‘æ–¹å¼**: 
- ä»…æ‰‹åŠ¨è§¦å‘ (workflow_dispatch)
- ä¸æ”¯æŒè‡ªåŠ¨è§¦å‘ï¼Œç¡®ä¿å‘å¸ƒçš„å¯æ§æ€§

**æ„å»ºå¹³å°**:
- âœ… **Windows**: 64ä½ä¾¿æºç‰ˆ ZIP åŒ…
- âœ… **Android**: Release APK + Debug APK
- âš ï¸ **iOS**: æœªç­¾åæ„å»º (å¼€å‘é˜¶æ®µ)

**è¾“å…¥å‚æ•°**:
- `version_tag`: ç‰ˆæœ¬æ ‡ç­¾ (å¯é€‰ï¼Œé»˜è®¤è‡ªåŠ¨ç”Ÿæˆ)
- `release_notes`: å‘å¸ƒè¯´æ˜ (å¯é€‰)

**è‡ªåŠ¨åŠŸèƒ½**:
- ç”ŸæˆåŸºäºæ—¶é—´çš„ç‰ˆæœ¬æ ‡ç­¾
- åˆ›å»º GitHub Release
- ä¸Šä¼ æ‰€æœ‰æ„å»ºäº§ç‰©
- ç”Ÿæˆè¯¦ç»†çš„å‘å¸ƒè¯´æ˜

### 2. å¿«é€Ÿæ„å»ºæµ‹è¯• (`quick-build.yml`)

**ç”¨é€”**: å¿«é€Ÿæµ‹è¯•ç‰¹å®šå¹³å°çš„æ„å»ºçŠ¶æ€

**è§¦å‘æ–¹å¼**: æ‰‹åŠ¨è§¦å‘

**å¹³å°é€‰æ‹©**:
- `android`: ä»…æ„å»º Android Debug APK
- `windows`: ä»…æ„å»º Windows Debug ç‰ˆæœ¬
- `ios`: ä»…æ„å»º iOS Debug ç‰ˆæœ¬ (æ— ç­¾å)
- `all`: æ„å»ºæ‰€æœ‰å¹³å°

**ç‰¹ç‚¹**:
- å¿«é€Ÿåé¦ˆ
- Debug ç‰ˆæœ¬æ„å»º
- é€‚åˆå¼€å‘é˜¶æ®µæµ‹è¯•

### 3. æ„å»ºçŠ¶æ€æ£€æŸ¥ (`build-check.yml`)

**ç”¨é€”**: ä»£ç è´¨é‡æ£€æŸ¥å’Œæ„å»ºéªŒè¯

**è§¦å‘æ¡ä»¶**:
- Pull Request åˆ° main/develop åˆ†æ”¯
- æ‰‹åŠ¨è§¦å‘

**æ£€æŸ¥å†…å®¹**:
- ä¾èµ–å†²çªæ£€æŸ¥
- ä»£ç åˆ†æ (`flutter analyze`)
- ä»£ç æ ¼å¼æ£€æŸ¥ (`dart format`)
- æ‰€æœ‰å¹³å°æ„å»ºæµ‹è¯•
- æ„å»ºçŠ¶æ€æ±‡æ€»æŠ¥å‘Š

### 4. ä¼ ç»Ÿæ„å»ºå‘å¸ƒ (`build-and-release.yml`)

**ç”¨é€”**: åŸºäºæ ‡ç­¾çš„ä¼ ç»Ÿå‘å¸ƒæµç¨‹

**è§¦å‘æ¡ä»¶**:
- æ¨é€ç‰ˆæœ¬æ ‡ç­¾ (v*)
- æ‰‹åŠ¨è§¦å‘

**åŠŸèƒ½**: å…¼å®¹ç°æœ‰çš„æ ‡ç­¾å‘å¸ƒæµç¨‹

## ğŸš€ ä½¿ç”¨æŒ‡å—

### ç”Ÿäº§ç¯å¢ƒå‘å¸ƒ

1. **è¿›å…¥ GitHub Actions é¡µé¢**
   - å¯¼èˆªåˆ°ä»“åº“çš„ Actions æ ‡ç­¾é¡µ

2. **é€‰æ‹©å·¥ä½œæµ**
   - ç‚¹å‡» "Multi-Platform Build and Release"

3. **é…ç½®æ„å»ºå‚æ•°**
   ```
   Version tag: v1.0.0 (å¯é€‰ï¼Œç•™ç©ºè‡ªåŠ¨ç”Ÿæˆ)
   Release notes: æœ¬æ¬¡æ›´æ–°çš„è¯¦ç»†è¯´æ˜
   ```

4. **æ‰§è¡Œæ„å»º**
   - ç‚¹å‡» "Run workflow"
   - ç­‰å¾…æ„å»ºå®Œæˆ (çº¦ 15-30 åˆ†é’Ÿ)

5. **æ£€æŸ¥ç»“æœ**
   - æ„å»ºæˆåŠŸåè‡ªåŠ¨åˆ›å»º GitHub Release
   - ä¸‹è½½æ„å»ºäº§ç‰©è¿›è¡Œæµ‹è¯•

### å¼€å‘é˜¶æ®µæµ‹è¯•

1. **å¿«é€Ÿå•å¹³å°æµ‹è¯•**
   ```
   å·¥ä½œæµ: Quick Build Test
   å¹³å°é€‰æ‹©: android/windows/ios/all
   ```

2. **PR æ„å»ºæ£€æŸ¥**
   ```
   è‡ªåŠ¨è§¦å‘: æäº¤ PR æ—¶è‡ªåŠ¨è¿è¡Œ
   æ£€æŸ¥å†…å®¹: ä»£ç è´¨é‡ + æ„å»ºæµ‹è¯•
   ```

### ç‰ˆæœ¬æ ‡ç­¾æ ¼å¼

**è‡ªåŠ¨ç”Ÿæˆæ ¼å¼**:
```
v2024.01.15-build.1430
æ ¼å¼: v{YYYY.MM.DD}-build.{HHMM}
```

**æ‰‹åŠ¨æŒ‡å®šæ ¼å¼**:
```
v1.0.0          # æ­£å¼ç‰ˆæœ¬
v1.0.0-beta.1   # æµ‹è¯•ç‰ˆæœ¬
v1.0.0-rc.1     # å€™é€‰ç‰ˆæœ¬
```

## ğŸ“¦ æ„å»ºäº§ç‰©

### Windows
- **æ–‡ä»¶**: `AnywhereChat-Windows-{version}.zip`
- **å†…å®¹**: 
  - åº”ç”¨ç¨‹åºæ–‡ä»¶
  - å¯åŠ¨è„šæœ¬ (`å¯åŠ¨AnywhereChat.bat`)
  - README è¯´æ˜æ–‡ä»¶
- **è¦æ±‚**: Windows 10+ 64ä½ç³»ç»Ÿ

### Android
- **Release APK**: `AnywhereChat-Android-Release-{version}.apk`
- **Debug APK**: `AnywhereChat-Android-Debug-{version}.apk`
- **è¦æ±‚**: Android 5.0 (API 21) åŠä»¥ä¸Š

### iOS
- **çŠ¶æ€**: æœªç­¾åæ„å»º
- **å†…å®¹**: æ„å»ºçŠ¶æ€ä¿¡æ¯å’Œä½¿ç”¨è¯´æ˜
- **é™åˆ¶**: éœ€è¦åœ¨ Xcode ä¸­é…ç½®ç­¾å

## âš™ï¸ æŠ€æœ¯è§„æ ¼

### ç¯å¢ƒé…ç½®
```yaml
Flutter: 3.24.5 (stable)
Dart: 3.8.1 (éš Flutter å®‰è£…)
Java: 17 (Android æ„å»º)
```

### æ„å»ºç¯å¢ƒ
- **Android**: Ubuntu Latest + Java 17
- **Windows**: Windows Latest
- **iOS**: macOS Latest

### æ„å»ºæ­¥éª¤
1. æ£€å‡ºä»£ç 
2. è®¾ç½® Flutter ç¯å¢ƒ
3. å®‰è£…ä¾èµ– (`flutter pub get`)
4. ç”Ÿæˆä»£ç  (`dart run build_runner build`)
5. æ‰§è¡Œå¹³å°æ„å»º
6. æ‰“åŒ…å’Œä¸Šä¼ 

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. Flutter ç‰ˆæœ¬ä¸åŒ¹é…
```yaml
# ç¡®ä¿å·¥ä½œæµä½¿ç”¨æ­£ç¡®ç‰ˆæœ¬
flutter-version: '3.24.5'
channel: 'stable'
```

#### 2. ä»£ç ç”Ÿæˆå¤±è´¥
```bash
# æœ¬åœ°æµ‹è¯•å‘½ä»¤
flutter clean
flutter pub get
dart run build_runner build --delete-conflicting-outputs
```

#### 3. Android æ„å»ºå¤±è´¥
- æ£€æŸ¥ Java ç‰ˆæœ¬ (å¿…é¡»æ˜¯ 17)
- éªŒè¯ `android/` ç›®å½•é…ç½®
- æŸ¥çœ‹ Gradle æ„å»ºæ—¥å¿—

#### 4. Windows æ„å»ºå¤±è´¥
- æ£€æŸ¥ Windows SDK å®‰è£…
- éªŒè¯ Visual Studio ç»„ä»¶
- æŸ¥çœ‹ MSBuild è¾“å‡º

#### 5. iOS æ„å»ºå¤±è´¥
- æ­£å¸¸ç°è±¡ (æ— ç­¾åé…ç½®)
- éœ€è¦åœ¨ Xcode ä¸­æ‰‹åŠ¨é…ç½®ç­¾å
- æ£€æŸ¥ iOS éƒ¨ç½²ç›®æ ‡ç‰ˆæœ¬

### è°ƒè¯•æ­¥éª¤

1. **æŸ¥çœ‹æ„å»ºæ—¥å¿—**
   - ç‚¹å‡»å¤±è´¥çš„å·¥ä½œæµ
   - å±•å¼€å…·ä½“æ­¥éª¤æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

2. **æœ¬åœ°å¤ç°**
   ```bash
   # ä½¿ç”¨ç›¸åŒçš„ Flutter ç‰ˆæœ¬
   flutter version 3.24.5
   
   # æ¸…ç†å¹¶é‡æ–°æ„å»º
   flutter clean
   flutter pub get
   dart run build_runner build --delete-conflicting-outputs
   
   # æµ‹è¯•æ„å»º
   flutter build apk --debug
   flutter build windows --debug
   ```

3. **æ£€æŸ¥ä¾èµ–**
   ```bash
   flutter doctor -v
   flutter pub deps
   flutter analyze
   ```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### æ„å»ºæ—¶é—´ä¼˜åŒ–
- ä½¿ç”¨ GitHub Actions ç¼“å­˜
- å¹¶è¡Œæ„å»ºå¤šä¸ªå¹³å°
- ä¼˜åŒ–ä¾èµ–å®‰è£…è¿‡ç¨‹

### èµ„æºä½¿ç”¨ä¼˜åŒ–
- åˆç†è®¾ç½®è¶…æ—¶æ—¶é—´
- æ¸…ç†ä¸´æ—¶æ–‡ä»¶
- ä¼˜åŒ–æ„å»ºäº§ç‰©å¤§å°

## ğŸ”’ å®‰å…¨è€ƒè™‘

### æƒé™ç®¡ç†
- å·¥ä½œæµä»…ä½¿ç”¨å¿…è¦æƒé™
- ä¸å­˜å‚¨æ•æ„Ÿä¿¡æ¯åœ¨ä»£ç ä¸­
- ä½¿ç”¨ GitHub Secrets ç®¡ç†å¯†é’¥

### æ„å»ºå®‰å…¨
- è·³è¿‡ä»£ç ç­¾å (å¼€å‘é˜¶æ®µ)
- éªŒè¯æ„å»ºäº§ç‰©å®Œæ•´æ€§
- é™åˆ¶å·¥ä½œæµè§¦å‘æ¡ä»¶

## ğŸ“ˆ ç›‘æ§å’Œç»´æŠ¤

### å®šæœŸæ£€æŸ¥
- ç›‘æ§æ„å»ºæˆåŠŸç‡
- æ£€æŸ¥æ„å»ºæ—¶é—´è¶‹åŠ¿
- æ›´æ–°ä¾èµ–ç‰ˆæœ¬

### ç»´æŠ¤ä»»åŠ¡
- å®šæœŸæ›´æ–° Flutter ç‰ˆæœ¬
- æ£€æŸ¥ GitHub Actions ç‰ˆæœ¬
- ä¼˜åŒ–å·¥ä½œæµé…ç½®

---

*æœ€åæ›´æ–°: 2024å¹´*
