import 'package:flutter/material.dart';

// ä¸¤å¥—æ¸²æŸ“å¼•æ“çš„æœ€å°é€‚é…ï¼?// - Flutter Markdown: ç°æœ‰å®ç°ï¼Œç¨³å®šå¯é?// - markdown_widget: æ–°å®ç°ï¼Œä¾¿äºåç»­æ‰©å±•ï¼ˆTOCã€è‡ªå®šä¹‰èŠ‚ç‚¹ç­‰ï¼‰

import 'package:flutter_markdown/flutter_markdown.dart' as fm;
import 'package:markdown_widget/markdown_widget.dart' as mdw;

/// æ¸²æŸ“å¼•æ“ç±»å‹
enum MarkdownEngine { flutterMarkdown, markdownWidget }

/// Markdown æ¸²æŸ“é€‚é…å™¨ï¼ˆæœ€å°å…¬å…±æ¥å£ï¼‰
abstract class MarkdownRenderer {
  const MarkdownRenderer();

  /// æ¸²æŸ“å…¥å£
  Widget render(
    String data, {
    TextStyle? baseTextStyle,
  });

  /// å·¥å‚ï¼šæŒ‰éœ€é€‰æ‹©å¼•æ“ï¼ˆé»˜è®¤é‡‡ç”?markdown_widget ä»¥ä¾¿è¯•ç‚¹ï¼?  factory MarkdownRenderer.defaultRenderer({MarkdownEngine? engine}) {
    switch (engine) {
      case MarkdownEngine.flutterMarkdown:
        return const _FlutterMarkdownRenderer();
      case MarkdownEngine.markdownWidget:
      default:
        return const _MarkdownWidgetRenderer();
    }
  }
}

/// Flutter Markdown æ¸²æŸ“å®ç°ï¼ˆä¿æŒç°æœ‰æ ·å¼çš„æœ€å°ä¸€è‡´æ€§ï¼‰
class _FlutterMarkdownRenderer implements MarkdownRenderer {
  const _FlutterMarkdownRenderer();

  @override
  Widget render(
    String data, {
    TextStyle? baseTextStyle,
  }) {
    return fm.MarkdownBody(
      data: data,
      selectable: true,
      styleSheet: fm.MarkdownStyleSheet(
        p: baseTextStyle,
      ),
    );
  }
}

/// markdown_widget æ¸²æŸ“å®ç°ï¼ˆå…ˆä»¥é»˜è®¤é…ç½®æ¥å…¥ï¼Œåç»­é€æ­¥è¦†ç›–æ ·å¼/è§„åˆ™ï¼?class _MarkdownWidgetRenderer implements MarkdownRenderer {
  const _MarkdownWidgetRenderer();

  @override
  Widget render(
    String data, {
    TextStyle? baseTextStyle,
  }) {
    // è¯´æ˜ï¼šmarkdown_widget çš„æ ·å¼?è¡Œä¸ºä¸»è¦é€šè¿‡ config/styleConfig æ‰©å±•ï¼?    // è¿™é‡Œå…ˆä»¥æœ€å°æ¥å…¥ä¸ºç›®æ ‡ï¼Œåç»­åœ¨æ¸è¿›è¿ç§»é˜¶æ®µå†é€é¡¹å¯¹é½æ ·å¼ä¸è‡ªå®šä¹‰è§„åˆ™ã€?    return mdw.MarkdownWidget(
      data: data,
      // åç»­è¿­ä»£ï¼šåœ¨æ­¤ä¼ å…?mdw.MarkdownConfig / mdw.StyleConfig ä»¥è¦†ç›–å­—ä½?é¢œè‰²/é—´è·
    );
  }
}


